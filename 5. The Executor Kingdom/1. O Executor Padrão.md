### O Executor Padrão
##

O conceito de executor é extremamente importante para entender. Por que? Porque o executor define como suas tarefas serão executadas em sua instância do Airflow. Por exemplo, você deseja executar várias tarefas ao mesmo tempo em uma única máquina. Nesse caso, o executor local pode ser útil. Se você possui um cluster Kubernetes e deseja executar várias tarefas nesse cluster Kubernetes, nesse caso, o executor Kubernetes será definitivamente adequado para isso. Mas deixe-me fazer uma rápida introdução ao executor. Então, primeiro, você tem que saber que atrás da cena do executor, sempre há uma fila. E essa fila é onde suas tarefas serão empurradas e puxadas pelos trabalhadores. Sem essa fila, será difícil definir a ordem em que suas tarefas devem ser executadas, mas uma vez que suas tarefas estão na fila, o executor define em qual sistema suas tarefas serão executadas.

E por padrão, quando você instala o Airflow pela primeira vez, existe o executor padrão, que é o executor sequencial. Deixe-me mostrar um esquema rápido. Digamos que você tenha esse pipeline de dados. T1, depois T2 e T3, onde T2 e T3 dependem de T1. E por último, o T4, onde o T4 depende do T2 e do T3. O problema é que T2 e T3 podem ser executados ao mesmo tempo. Por que? Porque eles estão no mesmo nível. Isso é o que você pode ver aqui. Ok, o que acontece quando esse pipeline de dados é acionado pelo segundo executor de controle? O segundo executor de controle permite que você execute suas tarefas sequencialmente, uma após a outra. Nesse caso, T1 será executado primeiro. Então, assim que T1 for concluído, T2 ou T3 receberá [inaudível 00:01:53]. Assim que o T2 é concluído, por exemplo, o T2 também é concluído. E, finalmente, o T4 é acionado. Depois de concluído, o T4 também foi concluído.

Portanto, a única coisa que você precisa lembrar é que, com o executor sequencial, você executa suas tarefas sequencialmente, uma após a outra. Você não pode executar várias tarefas ao mesmo tempo. Por que? Como o executor sequencial é baseado no SQLite e o SQLite não permite que você tenha vários direitos ao mesmo tempo. É por isso que você não pode executar várias tarefas ao mesmo tempo no Airflow com o executor sequencial. Então, quando você deve usar o executor sequencial? Quando o executor sequencial é útil? Na verdade, se você quiser depurar suas tarefas, ou se quiser fazer alguns experimentos, nesse caso, o executor sequencial pode ser bastante útil. Caso contrário, você praticamente nunca usará esse executor, pois ele é bastante limitado. Agora que sabemos disso, gostaria de mostrar onde ele está configurado. Se você digitar ``````docker ps``` para verificar os contêineres do seu [inaudível 00:03:00], e então vamos abrir uma sessão de barra, ```docker exec - it <conteiner-id> /bin/bash```. Uma vez dentro do container, aqui podemos interagir com o Airflow.

E se dermos uma olhada no parâmetro executor em airflow.cfg, que é o arquivo de configuração do Airflow, então vamos digitar ```grep executor airflow.cfg```, como podemos ver aqui, o valor por padrão é o executor sequencial, e o executor do parâmetro define o executor que você deseja. Além disso, se você der uma olhada no parâmetro ```grep sql_alchemy_conn airflow.cfg```, como você pode ver, novamente, por padrão, o valor é um banco de dados SQLite. Resumindo, quando você instalar e executar o Airflow pela primeira vez, obterá o executor sequencial com SQLite e poderá executar apenas uma tarefa por vez. Use esse executor apenas para  fins de experimentação.


##
### The Default Executor
##

The concept of executor is extremely important to understand. Why? Because the executor defines the way your tasks are going to be executed in your Airflow instance. For example, you want to execute multiple tasks at the same time on a single machine. In that case, the local executor might be useful. If you have a Kubernetes cluster and you want to execute multiple tasks on this Kubernetes cluster, in that case, the Kubernetes executor will be definitely suitable for that. But let me give you a quick introduction of the executor. So first, you have to know that behind the scene of the executor, there is always a queue. And that queue is where your tasks are going to be pushed and pulled by the workers. Without that queue, it will be hard to define the order in which your tasks should be executed, but once your tasks are in the queue, the executor defines on which system your tasks are going to be executed.

And by default, when you install Airflow for the first time, there is the default executor, which is the sequential executor. Let me show you a quick schema. Let's say you have this data pipeline. T1, then T2 and T3, where T2 and T3 depend on T1. And finally, T4, where T4 depends on T2 and T3. The thing is, T2 and T3 can be executed at the same time. Why? Because they are on the same level. That's what you can see here. Okay, what happens when this data pipeline is triggered by the second control executor? The second control executor allows you to execute your tasks sequentially, one after the other. So in that case, T1 will run first. Then as soon as T1 is completed, either T2 or T3 will get [inaudible 00:01:53]. Once T2 is completed, for example, T2 is completed as well. And finally, T4 gets triggered. Once it's done, T4 completed as well.

So the only thing you have to remember is that with the sequential executor, you execute your tasks sequential, one after the other. You can't execute multiple tasks at the same time. Why? Because the sequential executor is based on SQLite and SQLite doesn't allow you to have multiple rights at the same time. That's why you can't execute multiple tasks at the same time in Airflow with the sequential executor. So when should you use the sequential executor? When the sequential executor is useful? Actually, if you want to debug your tasks, or if you want to make some experiments, in that case, the sequential executor might be pretty useful. Otherwise, you will pretty much never use that executor as it is quite limited. Now we know that, I would like to show you where it is configured. If you type \&quot;docker ps\&quot; to check the containers of your [inaudible 00:03:00], and then let's open a bar session, \&quot;docker exec - IT,\&quot; and let's use the container IG of let's say the scheduler/bin/bash. Once we are inside the container, here we can interact with Airflow.

And if we take a look at the parameter executor in airflow.cfg, which is the configuration file of Airflow, so let's type \&quot;grab executor airflow.cfg, as we can see here, the value by default is the sequential executor, and the parameter executor defines the executor you want. Also, if you take a look at the parameter sql alchemy conn, as you can see, again, by default, the value is a SQLite database. To sum up, when you will install and run Airflow for the first time, you will get the sequential executor with SQLite, and you will be able to execute only one task at a time. Use that executor only for [inaudible 00:04:10] or for experimenting purposes.

